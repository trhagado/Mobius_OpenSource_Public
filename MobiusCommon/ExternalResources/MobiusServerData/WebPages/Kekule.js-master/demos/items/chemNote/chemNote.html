<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Chem Notebook</title>
  <!--
  <script src="../../../src/kekule.js?modules=chemWidget,algorithm&min=false"></script>
  <link rel="stylesheet" type="text/css" href="../../../src/widgets/themes/default/kekule.css" />
  -->
  <script src="../../libs/kekule/kekule.js?modules=chemWidget,algorithm"></script>
  <link rel="stylesheet" type="text/css" href="../../libs/kekule/themes/default/kekule.css" />
  <script src="res/chemNote.js"></script>
  <link rel="stylesheet" type="text/css" href="res/chemNote.css" />

  <script>
    var STORAGE_KEY = 'chemNoteData';
    var dataSet, noteListView, noteEditor, composer;

    function getInitData()
    {
      var demoIntro = 'A demo app adapted for both desktop and mobile platforms.\n\n' +
        'Each piece of note may contain texts and chemistry objects. ';
      var demoIntro2 = 'Created notes will be saved by the local storage of web browser.';
      var demoIntroChemObjStr = '{"coordPos2D":0,"coordPos3D":0,"defAutoScaleRefLength":0.8,"root":{"id":"o1","coordPos2D":0,"coordPos3D":0,"children":{"id":"o2","coordPos2D":0,"coordPos3D":0,"items":[{"__type__":"Kekule.Molecule","id":"m1","coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":2.502349097842262,"y":38.33168247767857,"__type__":"object"},"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","id":"a4","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":0.293333333333333,"y":-1.3599999999999994,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a6","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":0.9861536563608841,"y":-1.759999999999998,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a2","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":-0.39948698969421814,"y":-1.759999999999998,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a5","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":0.9861536563608841,"y":-2.5600000000000023,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a1","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":-0.39948698969421814,"y":-2.5600000000000023,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a3","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":0.293333333333333,"y":-2.9599999999999937,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","id":"b5","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","id":"b3","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":2,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[0,2]},{"__type__":"Kekule.Bond","id":"b6","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":2,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[1,3]},{"__type__":"Kekule.Bond","id":"b1","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[2,4]},{"__type__":"Kekule.Bond","id":"b4","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[3,5]},{"__type__":"Kekule.Bond","id":"b2","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":2,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[4,5]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.Glyph.StraightLine","id":"p1","coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null],"coord2D":{"x":4.529015764508928,"y":38.346920572916666,"__type__":"object"},"ctab":{"nodes":[{"__type__":"Kekule.Glyph.PathGlyphNode","id":"n1","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":3.219047619047619,"y":-2.1447619047619,"__type__":"object"},"coord3D":{"x":0,"y":0,"z":0,"__type__":"object"},"nodeType":"location"},{"__type__":"Kekule.Glyph.PathGlyphNode","id":"n2","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":4.754285714285716,"y":-2.1447619047619,"__type__":"object"},"coord3D":{"x":1.2000000000000002,"y":0,"z":0,"__type__":"object"},"nodeType":"location"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Glyph.PathGlyphConnector","id":"c1","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"pathType":"L","pathParams":{"endArrowType":"open","endArrowWidth":0.2,"endArrowLength":0.2,"lineLength":1.5,"__type__":"object"},"connectedObjs":[0,1]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.Molecule","id":"m2","coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"overrideRenderOptionItems":[null],"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","id":"a7","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"coord2D":{"x":6.436561172468792,"y":36.202158668154766,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a8","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"coord2D":{"x":5.743740849441242,"y":36.60215866815476,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a9","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"coord2D":{"x":7.129381495496341,"y":36.60215866815476,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"Cl"},{"__type__":"Kekule.Atom","id":"a10","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"coord2D":{"x":6.436561172468792,"y":35.40215866815476,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"O"},{"__type__":"Kekule.Atom","id":"a11","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"coord2D":{"x":5.05092052641369,"y":36.202158668154766,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","id":"b7","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","id":"b8","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,2]},{"__type__":"Kekule.Bond","id":"b9","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"bondType":"covalent","bondOrder":2,"electronCount":4,"isInAromaticRing":false,"connectedObjs":[0,3]},{"__type__":"Kekule.Bond","id":"b10","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[1,4]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.TextBlock","id":"t1","coordPos2D":21,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"needRecalcSize":true,"coord2D":{"x":4.212825288318453,"y":36.35453962053571,"__type__":"object"},"size2D":{"x":0.2560000000000002,"y":0.4480000000000075,"__type__":"object"},"text":"+"},{"__type__":"Kekule.Molecule","id":"m3","coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null,null],"coord2D":{"x":8.433777669270833,"y":36.53739676339286,"__type__":"object"},"charge":0,"parity":null,"formula":{"sections":[{"__type__":"object","obj":{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"charge":0,"parity":null,"isotopeId":"Al"},"count":1},{"__type__":"object","obj":{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"charge":0,"parity":null,"isotopeId":"Cl"},"count":3}],"charge":0,"radical":0,"__type__":"Kekule.MolecularFormula"}},{"__type__":"Kekule.Glyph.HeatSymbol","id":"p2","coordPos2D":0,"coordPos3D":0,"renderOptions":{"strokeWidth":1.5,"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":8.1404443359375,"y":38.11834914434524,"__type__":"object"},"ctab":{"nodes":[{"__type__":"Kekule.Glyph.PathGlyphNode","id":"n3","interactMode":-1,"coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null],"coord2D":{"x":0.3390476190476175,"y":-2.0057142857142836,"__type__":"object"},"coord3D":{"x":0,"y":0.2,"z":0,"__type__":"object"},"nodeType":"location"},{"__type__":"Kekule.Glyph.PathGlyphNode","id":"n4","interactMode":-1,"coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null,null],"coord2D":{"x":0.512252699804506,"y":-2.305714285714288,"__type__":"object"},"coord3D":{"x":0.17320508075688776,"y":-0.09999999999999996,"z":0,"__type__":"object"},"nodeType":"location"},{"__type__":"Kekule.Glyph.PathGlyphNode","id":"n5","interactMode":-1,"coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null],"coord2D":{"x":0.16584253829073248,"y":-2.305714285714288,"__type__":"object"},"coord3D":{"x":-0.17320508075688767,"y":-0.10000000000000009,"z":0,"__type__":"object"},"nodeType":"location"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Glyph.PathGlyphConnector","id":"c2","interactMode":-1,"coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null],"pathType":"L","pathParams":{"lineLength":1,"edgeCount":3,"nodeProps":{"__type__":"object","interactMode":-1},"connectorProps":{"__type__":"object","interactMode":-1},"__type__":"object"},"connectedObjs":[0,1]},{"__type__":"Kekule.Glyph.PathGlyphConnector","id":"c3","interactMode":-1,"coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null],"pathType":"L","pathParams":{"lineLength":1,"edgeCount":3,"nodeProps":{"__type__":"object","interactMode":-1},"connectorProps":{"__type__":"object","interactMode":-1},"__type__":"object"},"connectedObjs":[1,2]},{"__type__":"Kekule.Glyph.PathGlyphConnector","id":"c4","interactMode":-1,"coordPos2D":0,"coordPos3D":0,"overrideRenderOptionItems":[null],"pathType":"L","pathParams":{"lineLength":1,"edgeCount":3,"nodeProps":{"__type__":"object","interactMode":-1},"connectorProps":{"__type__":"object","interactMode":-1},"__type__":"object"},"connectedObjs":[2,0]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.Molecule","id":"m4","coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":9.865777994791667,"y":38.89377766927083,"__type__":"object"},"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","id":"a14","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":1.332820323027553,"y":-2.266666666666673,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a18","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":2.0256406460551055,"y":-1.8666666666666742,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a15","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":0.6400000000000023,"y":-1.8666666666666742,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a13","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":1.332820323027553,"y":-3.066666666666663,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a19","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":2.7184609690826544,"y":-2.266666666666673,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a21","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":2.0256406460551073,"y":-1.066666666666677,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"O"},{"__type__":"Kekule.Atom","id":"a16","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":-0.052820323027548355,"y":-2.266666666666673,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a12","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":0.6400000000000023,"y":-3.4666666666666686,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a20","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":3.4112812921102034,"y":-1.8666666666666742,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","id":"a17","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"coord2D":{"x":-0.052820323027548355,"y":-3.066666666666663,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","id":"b17","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","id":"b13","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[0,2]},{"__type__":"Kekule.Bond","id":"b12","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":2,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[0,3]},{"__type__":"Kekule.Bond","id":"b18","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[1,4]},{"__type__":"Kekule.Bond","id":"b20","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"bondType":"covalent","bondOrder":2,"electronCount":4,"isInAromaticRing":false,"connectedObjs":[1,5]},{"__type__":"Kekule.Bond","id":"b14","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":2,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[2,6]},{"__type__":"Kekule.Bond","id":"b11","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[3,7]},{"__type__":"Kekule.Bond","id":"b19","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[4,8]},{"__type__":"Kekule.Bond","id":"b15","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[6,9]},{"__type__":"Kekule.Bond","id":"b16","coordPos2D":0,"coordPos3D":0,"renderOptions":{"useAtomSpecifiedColor":true,"__type__":"object"},"overrideRenderOptionItems":[null],"parity":null,"bondType":"covalent","bondOrder":2,"electronCount":3,"isInAromaticRing":true,"connectedObjs":[7,9]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.TextBlock","id":"t2","coordPos2D":21,"coordPos3D":0,"renderOptions":{"fontFamily":"Georgia, Times New Roman, Times, serif","fontSize":20,"useAtomSpecifiedColor":false,"color":"#000066","__type__":"object"},"overrideRenderOptionItems":[null,null],"needRecalcSize":true,"coord2D":{"x":4.825777994791667,"y":34.6804443359375,"__type__":"object"},"size2D":{"x":6.6016000976562506,"y":0.6400000000000006,"__type__":"object"},"text":"Friedel-Crafts Reaction"}],"__type__":"Kekule.ChemObjList"},"__type__":"Kekule.ChemSpaceElement"},"enableAutoId":true,"screenSize":{"x":900,"y":1500,"__type__":"object"},"size2D":{"x":24,"y":40,"__type__":"object"},"__type__":"Kekule.ChemDocument"}';
      var demoIntroImgPreview = 'data:image/png;base64,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';
      var nowTime = Date.now();
      var result = [
        {'title': 'Chem Note Demo', 'text': demoIntro, 'chemObj': demoIntroChemObjStr, 'imgPreview': demoIntroImgPreview, 'modifiedTime': nowTime},
        {'title': 'Note persistence', 'text': demoIntro2, 'modifiedTime': nowTime}
      ];
      return result;
    }

    function init()
    {
      dataSet = new ChemNote.NoteDataSet();
      dataSet.loadFromStorage(STORAGE_KEY);
      if (!dataSet.getData() || !dataSet.getData().length)
        dataSet.setData(getInitData());

      var panelSwitcher = new ChemNote.PanelSwitcher();
      panelSwitcher.setPanels([$('noteListPanel'), $('noteEditPanel')]);

      noteListView = Kekule.Widget.getWidgetById('noteListView');
      noteListView.setDataSet(dataSet);

      noteEditor = Kekule.Widget.getWidgetById('noteEditor');

      noteListView.on('select', function(e){
        var note = e.note;
        noteEditor.setNote(note);
        panelSwitcher.setActivePanelIndex(1);
      });

      var btnCreateNote = Kekule.Widget.getWidgetById('btnCreateNote');
      btnCreateNote.on('execute', function(e){
        var note = {};
        noteEditor.setNote(note);
        panelSwitcher.setActivePanelIndex(1);
      });

      var btnDoneEdit = Kekule.Widget.getWidgetById('btnDoneEditNote');
      btnDoneEdit.setShowText(false);
      btnDoneEdit.on('execute', function(e){
        var note = noteEditor.getNote();
        if (note)
        {
          noteEditor.saveToNote(note);
          if (noteListView.hasItem(note))
            noteListView.modifyNote(note);
          else
            noteListView.addNote(note);
          panelSwitcher.setActivePanelIndex(0);
          dataSet.saveToStorage(STORAGE_KEY);
        }
      });
      var btnCancelEdit = Kekule.Widget.getWidgetById('btnCancelEditNote');
      btnCancelEdit.setShowText(false);
      btnCancelEdit.on('execute', function(e){
        panelSwitcher.setActivePanelIndex(0);
      });
      var btnRemoveNote = Kekule.Widget.getWidgetById('btnRemoveEditNote');
      btnRemoveNote.setShowText(false);
      btnRemoveNote.on('execute', function(e){
        var handled = true;
        var note = noteEditor.getNote();
        if (note)
        {
          if (noteListView.hasItem(note))
          {
            if (window.confirm('Are you sure to delete this note?'))
            {
              noteListView.removeNote(note);
              dataSet.saveToStorage(STORAGE_KEY);
              handled = true;
            }
            else
              handled = false;
          }
          if (handled)
          {
            panelSwitcher.setActivePanelIndex(0);
          }
        }
      });
    }
    Kekule.X.domReady(init);
  </script>

  <style>
    #noteListPanel, #noteEditPanel
    {
      float: left;
    }
  </style>
</head>
<body>
  <section class="Panel" id="noteListPanel" data-widget="Kekule.Widget.DumbWidget" style="z-index: 2">
    <h1 class="SectionTitle">
      <span class="Caption">Notes</span>
        <span class="TitleToolbar" data-widget="Kekule.Widget.ButtonGroup">
          <a id="btnCreateNote" class="ToolButton" data-widget="Kekule.Widget.Button">&#10010;</a>
        </span>
    </h1>
    <ul id="noteListView" class="SectionContent" data-widget="ChemNote.NoteListView"></ul>
  </section>
  <section class="Panel" id="noteEditPanel" data-widget="Kekule.Widget.DumbWidget">
    <h1 class="SectionTitle">
      <span class="Caption">Edit Note</span>
        <span class="TitleToolbar" data-widget="Kekule.Widget.ButtonGroup">
          <a id="btnDoneEditNote" class="ToolButton K-Res-Button-YesOk" data-widget="Kekule.Widget.Button">&#10004;</a>
          <a id="btnCancelEditNote" class="ToolButton K-Res-Button-NoCancel" data-widget="Kekule.Widget.Button">&#10006;</a>
          <a id="btnRemoveEditNote" class="ToolButton K-Res-Icon-Remove" data-widget="Kekule.Widget.Button">&#10006;</a>
        </span>
    </h1>
    <div id="noteEditor" class="SectionContent" data-widget="ChemNote.NoteEditor"></div>
  </section>
</body>
</html>